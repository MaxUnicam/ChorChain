<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Registration</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" 
integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" 
crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" 
integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" 
crossorigin="anonymous">
<link href="website.css" rel="stylesheet" type="text/css">
<script src="lib/angular.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular-cookies.js"></script>
</head>
<body ng-app="homePage" ng-controller="controller">

	<div class="container">
		<div class="myformIndex">
			<div class="header-form text-center">
				<h3 class="span-header-form m-4">Welcome</h3>
				<font color="red">Please sign-up and then login with your account in MetaMask!</font>
			</div>
			<ul class="nav nav-tabs  nav-justified" id="myTab" role="tablist">
				<li class="nav-item"><a class="nav-link active" id="login-tab"
					data-toggle="tab" href="#login" role="tab" aria-controls="login"
					aria-selected="true">Login</a></li>
				<li class="nav-item"><a class="nav-link" id="signup-tab"
					data-toggle="tab" href="#signup" role="tab" aria-controls="signup"
					aria-selected="false" >Sign up or Create account</a></li>
			</ul>
			<div class="tab-content m-4" id="myTabContent">
				<!-- Login Tab content-->
				
				<div class="tab-pane fade show active" id="login" role="tabpanel">
				
					<h5 class="m-2 text-center">Login</h5>
					<form method="POST">
						<div class="form-group">
							<label for="address">Insert address</label> <input type="text"
								class="form-control" id="address"
								placeholder="Insert account address"
								ng-model="user.address"> <small id="addressHelp"
								class="form-text text-muted"> </small>
						</div>
						
						<input type="submit" class="btn btn-primary text-center"
							value="Login" ng-click="loginUser()">
					</form>
					<div class="video1">
						<h2> Tool Demostration:</h2>
						</div>
						<video width="455" controls>
							<source src="videoDemo.mp4" type="video/mp4">
							Your browser does not support HTML5 video.
						</video>
					
				</div>
				<!-- Sign up Tab content-->
				<div class="tab-pane fade" id="signup" role="tabpanel">
					<h5 class="m-2 text-center">Sign up or Create account</h5>
					<hr>
					<form method="POST">
					
					<div class="input-group mb-3">
				 
				  <label>Default MetaMask address account: </label>
				    <label class="input-group-text" id="labeladdress"></label>
					<button class="input-group-text" style="cursor:pointer;" onclick="copyToClipboard('#labeladdress')"><i class="far fa-copy"></i></button>			  
				    </div>
						
						<div class="form-group">
							<label class="sr-only" for="address">Insert your address</label>
							<input type="text" class="form-control" placeholder="Copy here the default account..." id="addressRegUser"
								ng-model="regUser.address">
							<small id="addressHelp" class="form-text text-muted"></small>
						</div>
						<div class="form-group">
							<input type="submit" class="btn btn-primary" value="Sign Up with your MetaMask wallet"
								style="width: 100%" ng-click="registerUser()">
						</div>
					</form>
				</div>
				<p><hr/><p>
				<P style="text-align:center">OR</P>
				<p><hr/><p>
				<!-- Create an account content-->

							<input type="submit" class="btn btn-primary" value="Create a new MetaMask account"
								style="width: 100%" onclick="createAccount()">
				
				</div>
			</div>
		</div>
	</div>
<style>
div.video1{
 position: relative;
top:60px;	
}
</style>
	<script src="lib/app.js"></script>
	<script src="lib/controller.js"></script>
	<script src="lib/service.js"></script>
	<script src="lib/bundle.js"></script>
	
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
		integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
		crossorigin="anonymous"></script>
		
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
</body>

<script>
	window.addEventListener('load', function() {

		  // Check if Web3 has been injected by the browser (Mist/MetaMask).
		  if (typeof web3 !== 'undefined' && web3.currentProvider.isMetaMask == true) {
			console.log("Metamask presente!");
		    web3js = new Web3(web3.currentProvider);
		    // window.ethereum.enable();
		  } else {
			  if(!alert('Estensione MetaMask assente! Creare un account MetaMask')){
				  window.location.href = "https://metamask.io/";
				  }
		  }

	});</script>
	
<script> 
// If the MetaMask extension is present,you are asked to log in to your account the permissions to access the wallet
ethereum.enable();
$("#labeladdress").text(web3.eth.accounts[0]);

var account = web3.eth.accounts[0];
var accountInterval = setInterval(function() {
  if (web3.eth.accounts[0] !== account) {
    account = web3.eth.accounts[0];
    $("#labeladdress").text(web3.eth.accounts[0]);
  }
}, 100);
</script>

<script>
function copyToClipboard(element) {
	  var $temp = $("<input>");
	  $("body").append($temp);
	  $temp.val($(element).text()).select();
	  document.execCommand("copy");
	  $temp.remove();
	}
</script>

<script>
function createAccount() {
	console.log("entrato");

	web3.personal.newAccount("password",function(error,result){
	    if(!error){
	        console.log(result);
	    }
	});
	console.log(addr);
}
</script>



</html>